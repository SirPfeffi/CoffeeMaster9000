#:import dp kivy.metrics.dp

<AdminScreen>:
    canvas.before:
        Color:
            rgba: 0.898, 0.91, 0.941, 1
        Rectangle:
            pos: self.pos
            size: self.size
    
    BoxLayout:
        orientation: "vertical"
        padding: dp(18)
        spacing: dp(12)
        
        # Header
        BoxLayout:
            size_hint_y: None
            height: dp(80)
            Label:
                text: "Admin-Bereich"
                font_size: '28sp'
                bold: True
                color: 0.12, 0.12, 0.12, 1
        
        # Statistik-Box
        BoxLayout:
            size_hint_y: None
            height: dp(150)
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [12,]
            Label:
                text: root.stats_text
                font_size: '18sp'
                color: 0.1, 0.1, 0.1, 1
                padding: [dp(20), dp(20)]
                text_size: self.size
                halign: 'left'
                valign: 'middle'

        # Admin-Funktionen
        GridLayout:
            cols: 2
            spacing: dp(12)
            size_hint_y: None
            height: dp(180)

            Button:
                text: "Benutzerverwaltung"
                background_normal: ''
                background_color: 0.4, 0.5, 0.6, 1
                color: 1, 1, 1, 1
                font_size: '16sp'
                on_release: root.show_user_management()

            Button:
                text: "Kassensaldo anzeigen"
                background_normal: ''
                background_color: 0.4, 0.5, 0.6, 1
                color: 1, 1, 1, 1
                font_size: '16sp'
                on_release: root.show_balance_overview()

            Button:
                text: "Einzahlung buchen"
                background_normal: ''
                background_color: 0.102, 0.737, 0.612, 1
                color: 1, 1, 1, 1
                font_size: '16sp'
                on_release: root.book_deposit()

            Button:
                text: "Fehlbuchung stornieren"
                background_normal: ''
                background_color: 0.839, 0.153, 0.157, 1
                color: 1, 1, 1, 1
                font_size: '16sp'
                on_release: root.cancel_transaction()
        
        # Spacer
        Widget:
            size_hint_y: 1

        # Zurück-Button
        Button:
            text: "Zurück zum Hauptbildschirm"
            background_normal: ''
            background_color: 0.5, 0.5, 0.5, 1
            color: 1, 1, 1, 1
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'
            on_release: root.return_to_main()